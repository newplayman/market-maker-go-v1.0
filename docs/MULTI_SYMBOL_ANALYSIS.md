# 多交易对资金分配方案

## 总资金：1000 USDC，20X杠杆

### 市场价格假设（2024年12月）
- ETH: 3,000 USDC
- BTC: 42,000 USDC
- SOL: 120 USDC
- BNB: 600 USDC
- XRP: 0.60 USDC

### 资金分配策略（按市值和流动性权重）

| 交易对 | 权重 | net_max | 名义价值 | 保证金需求 | 资金占比 |
|--------|------|---------|----------|-----------|---------|
| ETHUSDC | 35% | 0.50 ETH | 1,500 USDC | 75 USDC | 7.5% |
| BTCUSDC | 30% | 0.015 BTC | 630 USDC | 31.5 USDC | 3.15% |
| SOLUSDC | 20% | 6.0 SOL | 720 USDC | 36 USDC | 3.6% |
| BNBUSDC | 10% | 1.0 BNB | 600 USDC | 30 USDC | 3.0% |
| XRPUSDC | 5% | 500 XRP | 300 USDC | 15 USDC | 1.5% |
| **总计** | 100% | - | **3,750 USDC** | **187.5 USDC** | **18.75%** |

### 风险评估
- ✅ 保证金占比：18.75% < 50%（安全阈值）
- ✅ 单交易对最大风险：7.5%（ETH）
- ✅ 总名义价值：3,750 USDC（3.75倍杠杆，远低于20X）
- ✅ 缓冲空间：81.25%资金可用于应对波动

### WebSocket压力评估
| 资源 | 需求 | 限制 | 占比 |
|------|------|------|------|
| Depth Streams | 5个 | 200/连接 | 2.5% |
| Trade Streams | 5个 | 200/连接 | 2.5% |
| User Stream | 1个 | 200/连接 | 0.5% |
| **总Stream数** | **11个** | **200** | **5.5%** |

- ✅ 单连接完全容纳
- ✅ 更新频率：100ms × 11 = 1.1 stream/秒（可忽略）

### 订单速率评估
| 指标 | 单交易对 | 5交易对 | 币安限制 | 安全余量 |
|------|---------|---------|---------|---------|
| 挂单总数 | 14单 | 70单 | 10,000单 | 99.3% |
| 下单速率 | 6次/秒 | 30次/秒 | 300次/10秒 | 90% |
| 撤单速率 | 40次/分 | 200次/分 | 200次/分 | 0% ⚠️ |

**关键发现**：撤单速率是瓶颈！

### 需要调整的配置
1. ✅ `global.total_notional_max`: 1000 → **4000**
2. ⚠️ 单交易对`max_cancel_per_min`: 200 → **调整为全局共享机制**
3. ✅ `quote_interval_ms`: 1000ms（保持，避免过快刷单）

### 结论
**✅ 可以安全运行5个交易对**，但需要优化撤单限流机制。


